import{i as S}from"./index-Bb6yjXMn.js";import{_ as J,k as M,m as j,o as m,c as g,a as t,w as e,r as o,i as _,F as H,q as X,s as O,g as l,x as n,f as c,G as E,n as $,p as K}from"./index-IacY0sFn.js";const Q={class:"api-page"},W={class:"card-header"},Y={class:"api-title"},Z={class:"api-path"},I={class:"api-name"},ee={class:"api-detail"},te={class:"description"},se={key:0,class:"section"},ae={class:"section"},le={class:"code-block"},oe={class:"section"},ne={key:0},re={class:"code-block"},ie={__name:"Api",setup(de){const x=_(["health"]),V=_(null),A=_(null);let r=null,i=null;const v=_(!1),d=_(null),C=_([{name:"health",path:"/api/health",method:"GET",description:"健康检查接口",response:{success:!0,data:"ok",message:null},status:null},{name:"track",path:"/api/track",method:"POST",description:"提交生活记录",params:[{name:"text",type:"string",required:!0,description:"记录内容"}],response:{success:!0,data:{id:1,content:"..."},message:null},status:null},{name:"records",path:"/api/records",method:"GET",description:"获取所有记录",response:{success:!0,data:[],message:null},status:null},{name:"deleteRecord",path:"/api/records/{id}",method:"DELETE",description:"删除记录",params:[{name:"id",type:"long",required:!0,description:"记录ID"}],response:{success:!0,data:null,message:null},status:null},{name:"updateRecord",path:"/api/records/{id}",method:"PUT",description:"更新记录",params:[{name:"id",type:"long",required:!0,description:"记录ID"},{name:"record",type:"object",required:!0,description:"记录对象"}],response:{success:!0,data:null,message:null},status:null},{name:"query",path:"/api/query",method:"POST",description:"自然语言查询",params:[{name:"text",type:"string",required:!0,description:"查询内容"}],response:{success:!0,data:"查询结果",message:null},status:null},{name:"weeklyReport",path:"/api/report/weekly",method:"GET",description:"生成周报",response:{success:!0,data:"周报内容",message:null},status:null},{name:"monthlyReport",path:"/api/report/monthly",method:"GET",description:"生成月报",response:{success:!0,data:"月报内容",message:null},status:null}]),z=u=>({GET:"success",POST:"primary",PUT:"warning",DELETE:"danger"})[u]||"info",P=async u=>{var h;const s=Date.now();try{let p;switch(u.name){case"health":p=await K.getHealth();break;case"records":p=await $.getAll();break;default:return}d.value={status:200,duration:Date.now()-s,data:p},u.status="ok"}catch(p){d.value={status:((h=p.response)==null?void 0:h.status)||500,duration:Date.now()-s,data:{error:p.message}},u.status="error"}v.value=!0},G=async()=>{for(const u of C.value)await P(u),await new Promise(s=>setTimeout(s,200))},N=()=>{r=S(V.value),r.setOption({tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:35,name:"GET 请求"},{value:25,name:"POST 请求"},{value:20,name:"PUT 请求"},{value:10,name:"DELETE 请求"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),i=S(A.value),i.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","04:00","08:00","12:00","16:00","20:00"]},yAxis:{type:"value",name:"ms"},series:[{data:[120,132,101,134,90,230],type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.3)"},{offset:1,color:"rgba(103, 194, 58, 0.05)"}]}},itemStyle:{color:"#67c23a"}}]})};return M(()=>{N(),window.addEventListener("resize",()=>{r==null||r.resize(),i==null||i.resize()})}),j(()=>{r==null||r.dispose(),i==null||i.dispose()}),(u,s)=>{const h=o("VideoPlay"),p=o("el-icon"),q=o("el-button"),y=o("el-tag"),f=o("el-table-column"),L=o("el-table"),U=o("el-collapse-item"),B=o("el-collapse"),w=o("el-card"),k=o("el-col"),D=o("el-row"),b=o("el-descriptions-item"),R=o("el-descriptions"),F=o("el-dialog");return m(),g("div",Q,[t(D,{gutter:20},{default:e(()=>[t(k,{span:24},{default:e(()=>[t(w,{shadow:"hover"},{header:e(()=>[l("div",W,[s[3]||(s[3]=l("span",null,"API 接口文档",-1)),t(q,{type:"primary",onClick:G},{default:e(()=>[t(p,null,{default:e(()=>[t(h)]),_:1}),s[2]||(s[2]=c(" 测试所有接口 ",-1))]),_:1})])]),default:e(()=>[t(B,{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=a=>x.value=a)},{default:e(()=>[(m(!0),g(H,null,X(C.value,a=>(m(),O(U,{key:a.name,name:a.name},{title:e(()=>[l("div",Y,[t(y,{type:z(a.method),size:"small"},{default:e(()=>[c(n(a.method),1)]),_:2},1032,["type"]),l("span",Z,n(a.path),1),l("span",I,n(a.name),1),a.status?(m(),O(y,{key:0,type:a.status==="ok"?"success":"danger",size:"small",class:"status-tag"},{default:e(()=>[c(n(a.status==="ok"?"正常":"异常"),1)]),_:2},1032,["type"])):E("",!0)])]),default:e(()=>[l("div",ee,[l("p",te,n(a.description),1),a.params&&a.params.length>0?(m(),g("div",se,[s[4]||(s[4]=l("h4",null,"请求参数",-1)),t(L,{data:a.params,size:"small",border:""},{default:e(()=>[t(f,{prop:"name",label:"参数名",width:"150"}),t(f,{prop:"type",label:"类型",width:"100"}),t(f,{prop:"required",label:"必填",width:"80"},{default:e(({row:T})=>[t(y,{type:T.required?"danger":"info",size:"small"},{default:e(()=>[c(n(T.required?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"description",label:"说明"})]),_:1},8,["data"])])):E("",!0),l("div",ae,[s[5]||(s[5]=l("h4",null,"响应示例",-1)),l("pre",le,n(JSON.stringify(a.response,null,2)),1)]),l("div",oe,[t(q,{type:"primary",size:"small",onClick:T=>P(a)},{default:e(()=>[...s[6]||(s[6]=[c(" 测试接口 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[t(k,{span:12},{default:e(()=>[t(w,{shadow:"hover"},{header:e(()=>[...s[7]||(s[7]=[l("span",null,"API 调用统计",-1)])]),default:e(()=>[l("div",{ref_key:"apiStatsChart",ref:V,class:"chart-container"},null,512)]),_:1})]),_:1}),t(k,{span:12},{default:e(()=>[t(w,{shadow:"hover"},{header:e(()=>[...s[8]||(s[8]=[l("span",null,"响应时间趋势",-1)])]),default:e(()=>[l("div",{ref_key:"responseTimeChart",ref:A,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),t(F,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),title:"接口测试结果",width:"600px"},{default:e(()=>[d.value?(m(),g("div",ne,[t(R,{column:1,border:""},{default:e(()=>[t(b,{label:"状态码"},{default:e(()=>[t(y,{type:d.value.status>=200&&d.value.status<300?"success":"danger"},{default:e(()=>[c(n(d.value.status),1)]),_:1},8,["type"])]),_:1}),t(b,{label:"响应时间"},{default:e(()=>[c(n(d.value.duration)+"ms ",1)]),_:1}),t(b,{label:"响应数据"},{default:e(()=>[l("pre",re,n(JSON.stringify(d.value.data,null,2)),1)]),_:1})]),_:1})])):E("",!0)]),_:1},8,["modelValue"])])}}},ce=J(ie,[["__scopeId","data-v-7265303a"]]);export{ce as default};
