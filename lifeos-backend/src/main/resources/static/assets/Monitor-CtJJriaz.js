import{i as b}from"./index-Bb6yjXMn.js";import{_ as V,k as H,m as U,o as c,c as m,a as t,w as e,r as d,i as v,F as g,q as h,s as A,y as B,g as s,v as I,x as u,t as W,f as y,p as q}from"./index-IacY0sFn.js";const J={class:"monitor-page"},j={class:"status-icon"},K={class:"status-info"},Q={class:"status-name"},X={class:"status-label"},Y={class:"card-header"},Z={class:"card-header"},$={class:"card-header"},ee={class:"log-container"},te={class:"log-time"},se={class:"log-message"},ae={class:"metrics-list"},oe={class:"metric-header"},le={class:"metric-name"},ne={class:"metric-value"},re={class:"card-header"},ie={class:"feature-item"},ce={__name:"Monitor",setup(de){const w=v(null),C=v(null);let r=null,i=null;const M=v([{name:"系统状态",value:"运行中",label:"正常",status:"online",icon:"CircleCheck",color:"#67c23a"},{name:"API 响应",value:"45ms",label:"平均",status:"normal",icon:"Timer",color:"#409eff"},{name:"内存使用",value:"68%",label:"4.2GB / 8GB",status:"warning",icon:"Cpu",color:"#e6a23c"},{name:"磁盘空间",value:"72%",label:"360GB / 500GB",status:"normal",icon:"Disc",color:"#409eff"}]),S=v([{time:"10:23:45",level:"INFO",message:"Application started successfully"},{time:"10:24:12",level:"INFO",message:"Health check passed"},{time:"10:25:33",level:"WARN",message:"High memory usage detected: 75%"},{time:"10:26:01",level:"INFO",message:"Database connection pool: 5 active, 3 idle"},{time:"10:27:15",level:"ERROR",message:"Failed to connect to Redis: Connection refused"},{time:"10:28:22",level:"INFO",message:"Auto-recovered Redis connection"}]),F=v([{name:"JVM 堆内存",value:"512MB / 2GB",percentage:25},{name:"非堆内存",value:"128MB / 256MB",percentage:50},{name:"线程使用率",value:"15 / 50",percentage:30},{name:"GC 暂停时间",value:"12ms",percentage:5},{name:"连接池使用率",value:"8 / 20",percentage:40}]),R=["应用健康检查","实时指标监控","日志级别管理","环境属性查看","计划任务管理","HTTP 跟踪","线程 Dump","堆 Dump 分析"],O=l=>({INFO:"info",WARN:"warning",ERROR:"danger",DEBUG:""})[l]||"info",N=l=>l<50?"#67c23a":l<80?"#e6a23c":"#f56c6c",D=async()=>{try{const l=await q.getLoggers();console.log("Loggers:",l)}catch(l){console.error("Failed to fetch loggers:",l)}},L=()=>{window.open("http://localhost:8080/actuator","_blank")},z=()=>{r=b(w.value);const l=Array(20).fill(0).map(()=>Math.floor(Math.random()*30)+20);r.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:Array(20).fill("").map((_,n)=>n),show:!1},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{data:l,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.3)"},{offset:1,color:"rgba(64, 158, 255, 0.05)"}]}},lineStyle:{color:"#409eff"},itemStyle:{color:"#409eff"}}]}),i=b(C.value);const a=Array(20).fill(0).map(()=>Math.floor(Math.random()*20)+60);i.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:Array(20).fill("").map((_,n)=>n),show:!1},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{data:a,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.3)"},{offset:1,color:"rgba(103, 194, 58, 0.05)"}]}},lineStyle:{color:"#67c23a"},itemStyle:{color:"#67c23a"}}]}),setInterval(()=>{l.shift(),l.push(Math.floor(Math.random()*30)+20),r.setOption({series:[{data:l}]}),a.shift(),a.push(Math.floor(Math.random()*20)+60),i.setOption({series:[{data:a}]})},2e3)};return H(()=>{z(),window.addEventListener("resize",()=>{r==null||r.resize(),i==null||i.resize()})}),U(()=>{r==null||r.dispose(),i==null||i.dispose()}),(l,a)=>{const _=d("el-icon"),n=d("el-card"),p=d("el-col"),f=d("el-row"),x=d("el-tag"),G=d("Refresh"),k=d("el-button"),E=d("el-progress"),P=d("Check");return c(),m("div",J,[t(f,{gutter:20,class:"status-cards"},{default:e(()=>[(c(!0),m(g,null,h(M.value,o=>(c(),A(p,{span:6,key:o.name},{default:e(()=>[t(n,{shadow:"hover",class:B(["status-card",o.status])},{default:e(()=>[s("div",j,[t(_,{size:40,color:o.color},{default:e(()=>[(c(),A(I(o.icon)))]),_:2},1032,["color"])]),s("div",K,[s("div",Q,u(o.name),1),s("div",{class:"status-value",style:W({color:o.color})},u(o.value),5),s("div",X,u(o.label),1)])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1}),t(f,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[t(p,{span:12},{default:e(()=>[t(n,{shadow:"hover"},{header:e(()=>[s("div",Y,[a[1]||(a[1]=s("span",null,"CPU 使用率",-1)),t(x,{type:"success"},{default:e(()=>[...a[0]||(a[0]=[y("实时",-1)])]),_:1})])]),default:e(()=>[s("div",{ref_key:"cpuChart",ref:w,class:"chart-container"},null,512)]),_:1})]),_:1}),t(p,{span:12},{default:e(()=>[t(n,{shadow:"hover"},{header:e(()=>[s("div",Z,[a[3]||(a[3]=s("span",null,"内存使用",-1)),t(x,{type:"success"},{default:e(()=>[...a[2]||(a[2]=[y("实时",-1)])]),_:1})])]),default:e(()=>[s("div",{ref_key:"memoryChart",ref:C,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),t(f,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[t(p,{span:12},{default:e(()=>[t(n,{shadow:"hover"},{header:e(()=>[s("div",$,[a[4]||(a[4]=s("span",null,"系统日志",-1)),t(k,{type:"primary",link:"",onClick:D},{default:e(()=>[t(_,null,{default:e(()=>[t(G)]),_:1})]),_:1})])]),default:e(()=>[s("div",ee,[(c(!0),m(g,null,h(S.value,(o,T)=>(c(),m("div",{key:T,class:B(["log-item",o.level])},[s("span",te,u(o.time),1),t(x,{type:O(o.level),size:"small",class:"log-level"},{default:e(()=>[y(u(o.level),1)]),_:2},1032,["type"]),s("span",se,u(o.message),1)],2))),128))])]),_:1})]),_:1}),t(p,{span:12},{default:e(()=>[t(n,{shadow:"hover"},{header:e(()=>[...a[5]||(a[5]=[s("div",{class:"card-header"},[s("span",null,"性能指标")],-1)])]),default:e(()=>[s("div",ae,[(c(!0),m(g,null,h(F.value,o=>(c(),m("div",{key:o.name,class:"metric-item"},[s("div",oe,[s("span",le,u(o.name),1),s("span",ne,u(o.value),1)]),t(E,{percentage:o.percentage,color:N(o.percentage),"stroke-width":8},null,8,["percentage","color"])]))),128))])]),_:1})]),_:1})]),_:1}),t(f,{style:{"margin-top":"20px"}},{default:e(()=>[t(p,{span:24},{default:e(()=>[t(n,{shadow:"hover"},{header:e(()=>[s("div",re,[a[7]||(a[7]=s("span",null,"Spring Boot Admin",-1)),t(k,{type:"primary",onClick:L},{default:e(()=>[...a[6]||(a[6]=[y(" 打开监控面板 ",-1)])]),_:1})])]),default:e(()=>[a[8]||(a[8]=s("p",{class:"admin-desc"}," Spring Boot Admin 提供更详细的应用监控功能，包括： ",-1)),t(f,{gutter:20,class:"admin-features"},{default:e(()=>[(c(),m(g,null,h(R,o=>t(p,{span:6,key:o},{default:e(()=>[s("div",ie,[t(_,{color:"#409EFF"},{default:e(()=>[t(P)]),_:1}),s("span",null,u(o),1)])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1})])}}},me=V(ce,[["__scopeId","data-v-2e12b734"]]);export{me as default};
